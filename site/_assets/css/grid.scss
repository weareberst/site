/* Raster grid subsystem (rsms.me/raster) */
grid,
.grid {
  display: grid;
  --grid-tc: repeat(8, 1fr);
  grid-column-gap: var(--column-gap, 4%);
  grid-template-columns: var(--grid-tc);
  --grid-cs: 1; /* column start */
  --grid-ce: -1; /* column end */
}

/* c -- cell or column */
grid > cell,
.grid > * {
  display: block;
  appearance: none;
  -webkit-appearance: none;
}

.grid > * {
  grid-column-start: 1;
  grid-column-end: -1;
}

grid[cols='1'] {
  --grid-tc: repeat(1, 1fr);
}
grid[cols='2'] {
  --grid-tc: repeat(2, 1fr);
}
grid[cols='3'] {
  --grid-tc: repeat(3, 1fr);
}
grid[cols='4'] {
  --grid-tc: repeat(4, 1fr);
}
grid[cols='5'] {
  --grid-tc: repeat(5, 1fr);
}
grid[cols='6'] {
  --grid-tc: repeat(6, 1fr);
}
grid[cols='7'] {
  --grid-tc: repeat(7, 1fr);
}
grid[cols='8'] {
  --grid-tc: repeat(8, 1fr);
}

/* span=start... */
grid > cell[span^='1'] {
  --grid-cs: 1;
}
grid > cell[span^='2'] {
  --grid-cs: 2;
}
grid > cell[span^='3'] {
  --grid-cs: 3;
}
grid > cell[span^='4'] {
  --grid-cs: 4;
}
grid > cell[span^='5'] {
  --grid-cs: 5;
}
grid > cell[span^='6'] {
  --grid-cs: 6;
}
grid > cell[span^='7'] {
  --grid-cs: 7;
}
grid > cell[span^='8'] {
  --grid-cs: 8;
}

/* span=...+width, span=...-end */
grid > cell[span$='+1'],
grid > cell[span='1'] {
  --grid-ce: 1;
}
grid > cell[span$='+2'],
grid > cell[span$='-1'],
grid > cell[span='2'] {
  --grid-ce: 2;
}
grid > cell[span$='+3'],
grid > cell[span$='-2'],
grid > cell[span='3'] {
  --grid-ce: 3;
}
grid > cell[span$='+4'],
grid > cell[span$='-3'],
grid > cell[span='4'] {
  --grid-ce: 4;
}
grid > cell[span$='+5'],
grid > cell[span$='-4'],
grid > cell[span='5'] {
  --grid-ce: 5;
}
grid > cell[span$='+6'],
grid > cell[span$='-5'],
grid > cell[span='6'] {
  --grid-ce: 6;
}
grid > cell[span$='+7'],
grid > cell[span$='-6'],
grid > cell[span='7'] {
  --grid-ce: 7;
}
grid > cell[span$='+8'],
grid > cell[span$='-7'],
grid > cell[span='8'] {
  --grid-ce: 8;
}
grid > cell[span$='-8'] {
  --grid-ce: 9;
}

/* connect vars */
grid > cell[span] {
  grid-column-end: span var(--grid-ce);
}
grid > cell[span*='+'],
grid > cell[span*='-'],
grid > cell[span*='..'] {
  grid-column-start: var(--grid-cs);
}
grid > cell[span*='-'],
grid > cell[span*='..'] {
  grid-column-end: var(--grid-ce);
}
grid > cell[span='row'] {
  grid-column: 1 / -1;
}

@media only screen and (min-width: #{$breakpoint-small - 1px}) {
  grid[cols-s='1'] {
    --grid-tc: repeat(1, 1fr);
  }
  grid[cols-s='2'] {
    --grid-tc: repeat(2, 1fr);
  }
  grid[cols-s='3'] {
    --grid-tc: repeat(3, 1fr);
  }
  grid[cols-s='4'] {
    --grid-tc: repeat(4, 1fr);
  }
  grid[cols-s='5'] {
    --grid-tc: repeat(5, 1fr);
  }
  grid[cols-s='6'] {
    --grid-tc: repeat(6, 1fr);
  }
  grid[cols-s='7'] {
    --grid-tc: repeat(7, 1fr);
  }
  grid[cols-s='8'] {
    --grid-tc: repeat(8, 1fr);
  }

  /* span-s=start... */
  grid > cell[span-s^='1'] {
    --grid-cs: 1;
  }
  grid > cell[span-s^='2'] {
    --grid-cs: 2;
  }
  grid > cell[span-s^='3'] {
    --grid-cs: 3;
  }
  grid > cell[span-s^='4'] {
    --grid-cs: 4;
  }
  grid > cell[span-s^='5'] {
    --grid-cs: 5;
  }
  grid > cell[span-s^='6'] {
    --grid-cs: 6;
  }
  grid > cell[span-s^='7'] {
    --grid-cs: 7;
  }
  grid > cell[span-s^='8'] {
    --grid-cs: 8;
  }

  /* span-s=...+width, span-s=...-end */
  grid > cell[span-s$='+1'],
  grid > cell[span-s='1'] {
    --grid-ce: 1;
  }
  grid > cell[span-s$='+2'],
  grid > cell[span-s$='-1'],
  grid > cell[span-s='2'] {
    --grid-ce: 2;
  }
  grid > cell[span-s$='+3'],
  grid > cell[span-s$='-2'],
  grid > cell[span-s='3'] {
    --grid-ce: 3;
  }
  grid > cell[span-s$='+4'],
  grid > cell[span-s$='-3'],
  grid > cell[span-s='4'] {
    --grid-ce: 4;
  }
  grid > cell[span-s$='+5'],
  grid > cell[span-s$='-4'],
  grid > cell[span-s='5'] {
    --grid-ce: 5;
  }
  grid > cell[span-s$='+6'],
  grid > cell[span-s$='-5'],
  grid > cell[span-s='6'] {
    --grid-ce: 6;
  }
  grid > cell[span-s$='+7'],
  grid > cell[span-s$='-6'],
  grid > cell[span-s='7'] {
    --grid-ce: 7;
  }
  grid > cell[span-s$='+8'],
  grid > cell[span-s$='-7'],
  grid > cell[span-s='8'] {
    --grid-ce: 8;
  }
  grid > cell[span-s$='-8'] {
    --grid-ce: 9;
  }

  /* connect vars */
  grid > cell[span-s] {
    grid-column-end: span var(--grid-ce);
  }
  grid > cell[span-s*='+'],
  grid > cell[span-s*='-'],
  grid > cell[span-s*='..'] {
    grid-column-start: var(--grid-cs);
  }
  grid > cell[span-s*='-'],
  grid > cell[span-s*='..'] {
    grid-column-end: var(--grid-ce);
  }
  grid > cell[span-s='row'] {
    grid-column: 1 / -1;
  }
}

@media only screen and (min-width: #{$breakpoint-medium - 1px}) {
  grid[cols-m='1'] {
    --grid-tc: repeat(1, 1fr);
  }
  grid[cols-m='2'] {
    --grid-tc: repeat(2, 1fr);
  }
  grid[cols-m='3'] {
    --grid-tc: repeat(3, 1fr);
  }
  grid[cols-m='4'] {
    --grid-tc: repeat(4, 1fr);
  }
  grid[cols-m='5'] {
    --grid-tc: repeat(5, 1fr);
  }
  grid[cols-m='6'] {
    --grid-tc: repeat(6, 1fr);
  }
  grid[cols-m='7'] {
    --grid-tc: repeat(7, 1fr);
  }
  grid[cols-m='8'] {
    --grid-tc: repeat(8, 1fr);
  }

  /* span-m=start... */
  grid > cell[span-m^='1'] {
    --grid-cs: 1;
  }
  grid > cell[span-m^='2'] {
    --grid-cs: 2;
  }
  grid > cell[span-m^='3'] {
    --grid-cs: 3;
  }
  grid > cell[span-m^='4'] {
    --grid-cs: 4;
  }
  grid > cell[span-m^='5'] {
    --grid-cs: 5;
  }
  grid > cell[span-m^='6'] {
    --grid-cs: 6;
  }
  grid > cell[span-m^='7'] {
    --grid-cs: 7;
  }
  grid > cell[span-m^='8'] {
    --grid-cs: 8;
  }

  /* span-m=...+width, span-m=...-end */
  grid > cell[span-m$='+1'],
  grid > cell[span-m='1'] {
    --grid-ce: 1;
  }
  grid > cell[span-m$='+2'],
  grid > cell[span-m$='-1'],
  grid > cell[span-m='2'] {
    --grid-ce: 2;
  }
  grid > cell[span-m$='+3'],
  grid > cell[span-m$='-2'],
  grid > cell[span-m='3'] {
    --grid-ce: 3;
  }
  grid > cell[span-m$='+4'],
  grid > cell[span-m$='-3'],
  grid > cell[span-m='4'] {
    --grid-ce: 4;
  }
  grid > cell[span-m$='+5'],
  grid > cell[span-m$='-4'],
  grid > cell[span-m='5'] {
    --grid-ce: 5;
  }
  grid > cell[span-m$='+6'],
  grid > cell[span-m$='-5'],
  grid > cell[span-m='6'] {
    --grid-ce: 6;
  }
  grid > cell[span-m$='+7'],
  grid > cell[span-m$='-6'],
  grid > cell[span-m='7'] {
    --grid-ce: 7;
  }
  grid > cell[span-m$='+8'],
  grid > cell[span-m$='-7'],
  grid > cell[span-m='8'] {
    --grid-ce: 8;
  }
  grid > cell[span-m$='-8'] {
    --grid-ce: 9;
  }

  /* connect vars */
  grid > cell[span-m] {
    grid-column-end: span var(--grid-ce);
  }
  grid > cell[span-m*='+'],
  grid > cell[span-m*='-'],
  grid > cell[span-m*='..'] {
    grid-column-start: var(--grid-cs);
  }
  grid > cell[span-m*='-'],
  grid > cell[span-m*='..'] {
    grid-column-end: var(--grid-ce);
  }
  grid > cell[span-m='row'] {
    grid-column: 1 / -1;
  }
}

@media only screen and (min-width: #{$breakpoint-large - 1px}) {
  grid[cols-l='1'] {
    --grid-tc: repeat(1, 1fr);
  }
  grid[cols-l='2'] {
    --grid-tc: repeat(2, 1fr);
  }
  grid[cols-l='3'] {
    --grid-tc: repeat(3, 1fr);
  }
  grid[cols-l='4'] {
    --grid-tc: repeat(4, 1fr);
  }
  grid[cols-l='5'] {
    --grid-tc: repeat(5, 1fr);
  }
  grid[cols-l='6'] {
    --grid-tc: repeat(6, 1fr);
  }
  grid[cols-l='7'] {
    --grid-tc: repeat(7, 1fr);
  }
  grid[cols-l='8'] {
    --grid-tc: repeat(8, 1fr);
  }

  /* span-l=start... */
  grid > cell[span-l^='1'] {
    --grid-cs: 1;
  }
  grid > cell[span-l^='2'] {
    --grid-cs: 2;
  }
  grid > cell[span-l^='3'] {
    --grid-cs: 3;
  }
  grid > cell[span-l^='4'] {
    --grid-cs: 4;
  }
  grid > cell[span-l^='5'] {
    --grid-cs: 5;
  }
  grid > cell[span-l^='6'] {
    --grid-cs: 6;
  }
  grid > cell[span-l^='7'] {
    --grid-cs: 7;
  }
  grid > cell[span-l^='8'] {
    --grid-cs: 8;
  }

  /* span-l=...+width, span-l=...-end */
  grid > cell[span-l$='+1'],
  grid > cell[span-l='1'] {
    --grid-ce: 1;
  }
  grid > cell[span-l$='+2'],
  grid > cell[span-l$='-1'],
  grid > cell[span-l='2'] {
    --grid-ce: 2;
  }
  grid > cell[span-l$='+3'],
  grid > cell[span-l$='-2'],
  grid > cell[span-l='3'] {
    --grid-ce: 3;
  }
  grid > cell[span-l$='+4'],
  grid > cell[span-l$='-3'],
  grid > cell[span-l='4'] {
    --grid-ce: 4;
  }
  grid > cell[span-l$='+5'],
  grid > cell[span-l$='-4'],
  grid > cell[span-l='5'] {
    --grid-ce: 5;
  }
  grid > cell[span-l$='+6'],
  grid > cell[span-l$='-5'],
  grid > cell[span-l='6'] {
    --grid-ce: 6;
  }
  grid > cell[span-l$='+7'],
  grid > cell[span-l$='-6'],
  grid > cell[span-l='7'] {
    --grid-ce: 7;
  }
  grid > cell[span-l$='+8'],
  grid > cell[span-l$='-7'],
  grid > cell[span-l='8'] {
    --grid-ce: 8;
  }
  grid > cell[span-l$='-8'] {
    --grid-ce: 9;
  }

  /* connect vars */
  grid > cell[span-l] {
    grid-column-end: span var(--grid-ce);
  }
  grid > cell[span-l*='+'],
  grid > cell[span-l*='-'],
  grid > cell[span-l*='..'] {
    grid-column-start: var(--grid-cs);
  }
  grid > cell[span-l*='-'],
  grid > cell[span-l*='..'] {
    grid-column-end: var(--grid-ce);
  }
  grid > cell[span-l='row'] {
    grid-column: 1 / -1;
  }
}
